  -- Clean up test profiles
  -- Deletes all 30 sample profiles created by migration 00008

  DO $$
  DECLARE
    test_uuids UUID[] := ARRAY[
      '11111111-1111-1111-1111-111111111111'::uuid,
      '11111111-1111-1111-1111-111111111112'::uuid,
      '11111111-1111-1111-1111-111111111113'::uuid,
      '11111111-1111-1111-1111-111111111114'::uuid,
      '11111111-1111-1111-1111-111111111115'::uuid,
      '11111111-1111-1111-1111-111111111116'::uuid,
      '11111111-1111-1111-1111-111111111117'::uuid,
      '11111111-1111-1111-1111-111111111118'::uuid,
      '11111111-1111-1111-1111-111111111119'::uuid,
      '11111111-1111-1111-1111-111111111120'::uuid,
      '22222222-2222-2222-2222-222222222221'::uuid,
      '22222222-2222-2222-2222-222222222222'::uuid,
      '22222222-2222-2222-2222-222222222223'::uuid,
      '22222222-2222-2222-2222-222222222224'::uuid,
      '22222222-2222-2222-2222-222222222225'::uuid,
      '22222222-2222-2222-2222-222222222226'::uuid,
      '22222222-2222-2222-2222-222222222227'::uuid,
      '22222222-2222-2222-2222-222222222228'::uuid,
      '22222222-2222-2222-2222-222222222229'::uuid,
      '22222222-2222-2222-2222-222222222230'::uuid,
      '33333333-3333-3333-3333-333333333331'::uuid,
      '33333333-3333-3333-3333-333333333332'::uuid,
      '33333333-3333-3333-3333-333333333333'::uuid,
      '33333333-3333-3333-3333-333333333334'::uuid,
      '33333333-3333-3333-3333-333333333335'::uuid,
      '33333333-3333-3333-3333-333333333336'::uuid,
      '33333333-3333-3333-3333-333333333337'::uuid,
      '33333333-3333-3333-3333-333333333338'::uuid,
      '33333333-3333-3333-3333-333333333339'::uuid,
      '33333333-3333-3333-3333-333333333340'::uuid
    ];
  BEGIN
    -- Delete in correct order to respect foreign key constraints
    DELETE FROM user_signals WHERE user_id = ANY(test_uuids);
    DELETE FROM messages WHERE sender_id = ANY(test_uuids);
    DELETE FROM connections WHERE requester_id = ANY(test_uuids) OR receiver_id = ANY(test_uuids);
    DELETE FROM profiles WHERE id = ANY(test_uuids);
    DELETE FROM auth.users WHERE id = ANY(test_uuids);

    RAISE NOTICE 'Deleted % test profiles', array_length(test_uuids, 1);
  END $$;